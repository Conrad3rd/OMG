<div class="container">
  <%# <h1>Profiles#show</h1>
  <p>Find me in app/views/profiles/show.html.erb</p> %>

  <div class="row h-100">
    <div class="col-4">
      <div class="card-profile flex-column">
        <h2>My profile</h2>
        <% if current_user.photo.attached? %>
          <%= cl_image_tag(current_user.photo.key, :width => 200, :crop => "pad") %>
        <% end %>

        <ul class="list-unstyled">
          <li><i class="fa-regular fa-envelope"></i> <%=  current_user.email %></li>
          <li><strong>Name: </strong><%=  current_user.first_name %> <%=  current_user.last_name %></li>
          <li><i class="fa-solid fa-location-dot"></i> <%=  current_user.address %></li>
          <li><strong>Age: </strong><%=  current_user.age %></li>
          <li><strong>Introduction: </strong><%=  current_user.introduction %></li>
          <li><%#  current_user.granny %></li>
        </ul>


         <% if current_user.first_name %>
           <%= link_to 'Edit your profile', edit_profile_path(@user), class: "btn btn-success" %>
         <% else%>
           <%= link_to 'Complete your profile', edit_profile_path(@user), class: "btn btn-primary" %>
         <% end %>

      </div>
    </div>

    <div class="col-4">
      <div class="card-profile">
      <% if current_user&.granny && current_user&.granny_offer&.present? %>
        <h2>YOUR OFFER DETAILS</h2>
          <%= current_user&.granny_offer&.details %>
        <h4> HOW MANY HUGS WOULD YOU LIKE TO RECEIVE: </h4>
          <%= current_user&.granny_offer&.hug_amount %>
        <h4> WHAT ELSE YOU MENTIONED: </h4>
          <%= current_user&.granny_offer&.additional %>
        <%= link_to 'Edit your offer', edit_profile_path(@user), class: "btn btn-success" %>
       <% else current_user&.granny %>

        <h4>YOU HAVEN'T CREATED AN OFFER!</h4>
          <%= link_to 'CREATE AN OFFER', new_granny_offer_path, class: "btn btn-primary" %>
      <% end %>
      </div>
    </div>

    <div class="col-4">
      <div class="card-profile">
         <h2>BOOKINGS</h2>
        <% if current_user&.granny?  %>
          <% current_user&.granny_offer&.bookings.each do |booking| %>
            <% if booking&.granny_offer&.user&.photo&.attached? %>
              <%= cl_image_tag(booking&.granny_offer&.user&.photo.key, :crop => "pad", :class => "img_profile") %>
            <% end %>
            <h4><%= booking&.granny_offer&.user&.email %></h4>
            <h4><%= booking&.start_date %></h4>
            <h4><%= booking&.end_date %></h4>
          <% end %>
        <% else %>
          <% current_user&.bookings.each do |booking| %>
            <% if booking&.granny_offer&.user&.photo&.attached? %>
              <%= cl_image_tag(booking&.granny_offer&.user&.photo.key, :crop => "pad", :class => "img_profile") %>
            <% end %>
            <h4><%= booking&.granny_offer&.user&.email %></h4>
            <h4><%= booking&.start_date %></h4>
            <h4><%= booking&.end_date %></h4>
          <% end %>
        <% end %>

      </div>
    </div>
  </div>
</div>
